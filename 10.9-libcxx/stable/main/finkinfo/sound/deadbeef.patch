diff -ruN deadbeef-1.9.1-orig/Makefile.am deadbeef-1.9.1/Makefile.am
--- deadbeef-1.9.1-orig/Makefile.am	2022-05-14 12:19:32.000000000 -0500
+++ deadbeef-1.9.1/Makefile.am	2022-06-05 17:19:12.000000000 -0500
@@ -57,13 +57,16 @@
 	u8_uc_map.h\
 	vfs.c vfs.h vfs_stdio.c\
 	viz.c viz.h\
-	volume.c volume.h
+	volume.c volume.h\
+	plugins/coreaudio/coreaudio.c plugins/nullout/nullout.c\
+	cocoautil.m cocoautil.h
 	
 #	ConvertUTF/ConvertUTF.c ConvertUTF/ConvertUTF.h
 
 sdkdir = $(pkgincludedir)
 sdk_HEADERS = deadbeef.h
-deadbeef_LDADD = $(LDADD) $(ICONV_LIB) $(DL_LIBS) -lm -lpthread $(DISPATCH_LIBS) $(INTL_LIBS) shared/libctmap.la plugins/libparser/libparser.la
+deadbeef_LDADD = $(LDADD) $(ICONV_LIB) $(DL_LIBS) -lm -lpthread $(DISPATCH_LIBS) $(INTLLIBS) $(COREAUDIO_LIBS) shared/libctmap.la plugins/libparser/libparser.la
+deadbeef_LDFLAGS = -Wl,-framework,IOKit -Wl,-framework,Foundation
 
 deadbeef_CFLAGS = $(DEPS_CFLAGS) $(DISPATCH_CFLAGS) -std=c99 -DLOCALEDIR=\"@localedir@\"
 
diff -ruN deadbeef-1.9.1-orig/configure.ac deadbeef-1.9.1/configure.ac
--- deadbeef-1.9.1-orig/configure.ac	2022-05-14 12:19:32.000000000 -0500
+++ deadbeef-1.9.1/configure.ac	2022-06-04 17:56:48.000000000 -0500
@@ -247,14 +247,14 @@
     ])
 ])
 
-AS_IF([test "${enable_staticlink}" != "no"], [
-    ], [
-    AC_CHECK_LIB([dispatch], [main], [HAVE_DISPATCH=yes])
-])
-DISPATCH_CFLAGS=-fblocks
-DISPATCH_LIBS="-ldispatch -lBlocksRuntime"
-AC_SUBST(DISPATCH_CFLAGS)
-AC_SUBST(DISPATCH_LIBS)
+#AS_IF([test "${enable_staticlink}" != "no"], [
+#    ], [
+#    AC_CHECK_LIB([dispatch], [main], [HAVE_DISPATCH=yes])
+#])
+#DISPATCH_CFLAGS=-fblocks
+#DISPATCH_LIBS="-ldispatch -lBlocksRuntime"
+#AC_SUBST(DISPATCH_CFLAGS)
+#AC_SUBST(DISPATCH_LIBS)
 
 AS_IF([test "${enable_gtk2}" = "yes"], [
     AS_IF([test "${enable_staticlink}" != "no"], [
diff -ruN deadbeef-1.9.1-orig/junklib.c deadbeef-1.9.1/junklib.c
--- deadbeef-1.9.1-orig/junklib.c	2022-05-14 12:19:32.000000000 -0500
+++ deadbeef-1.9.1/junklib.c	2022-06-04 17:57:53.000000000 -0500
@@ -32,9 +32,6 @@
 #include <stdlib.h>
 #include <string.h>
 #if HAVE_ICONV
-  #ifndef __MINGW32__
-  #define LIBICONV_PLUG
-  #endif
   #include <iconv.h>
 #elif HAVE_ICU
   #warning icu
diff -ruN deadbeef-1.9.1-orig/plugins/gtkui/ddb_splitter.c deadbeef-1.9.1/plugins/gtkui/ddb_splitter.c
--- deadbeef-1.9.1-orig/plugins/gtkui/ddb_splitter.c	2022-05-14 12:19:32.000000000 -0500
+++ deadbeef-1.9.1/plugins/gtkui/ddb_splitter.c	2022-06-04 18:15:05.000000000 -0500
@@ -23,6 +23,8 @@
 #include "support.h"
 #include "ddb_splitter.h"
 
+#define gtk_widget_get_mapped(widget) (GTK_WIDGET_MAPPED(widget))
+
 /**
  * SECTION: ddb-splitter
  * @title: DdbSplitter
