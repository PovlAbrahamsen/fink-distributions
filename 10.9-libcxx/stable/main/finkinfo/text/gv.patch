diff -Nurd gv-3.7.4.orig/configure gv-3.7.4/configure
--- gv-3.7.4.orig/configure	2013-03-17 07:20:09.000000000 -0400
+++ gv-3.7.4/configure	2025-08-10 17:25:12.000000000 -0400
@@ -13593,9 +13593,9 @@
 
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
-                DEPS_CFLAGS=""; DEPS_LIB=""
+                DEPS_CFLAGS=""; DEPS_LIBS=""
 elif test $pkg_failed = untried; then
-	DEPS_CFLAGS=""; DEPS_LIB=""
+	DEPS_CFLAGS=""; DEPS_LIBS=""
 else
 	DEPS_CFLAGS=$pkg_cv_DEPS_CFLAGS
 	DEPS_LIBS=$pkg_cv_DEPS_LIBS
@@ -13652,11 +13652,9 @@
 fi
 
 
-CFLAGS="$CFLAGS $DEPS_CFLAGS"
-LIBS="$LIBS $DEPS_LIBS"
 
 myCPPFLAGS="$CPPFLAGS"
-CPPFLAGS="$CPPFLAGS $X_CFLAGS"
+CPPFLAGS="$CPPFLAGS $DEPS_CFLAGS $X_CFLAGS"
 ## AC_CHECK_MEMBER(SimplePart.international,,[AC_MSG_ERROR([Xaw3d misses internationalisation support])],[#include <X11/Xaw3d/SimpleP.h>])
 ac_fn_c_check_member "$LINENO" "SimplePart" "international" "ac_cv_member_SimplePart_international" "#include <X11/Xaw3d/SimpleP.h>
 "
diff -Nurd gv-3.7.4.orig/src/Makefile.in gv-3.7.4/src/Makefile.in
--- gv-3.7.4.orig/src/Makefile.in	2013-03-17 07:20:10.000000000 -0400
+++ gv-3.7.4/src/Makefile.in	2025-08-10 16:48:59.000000000 -0400
@@ -599,7 +599,7 @@
 bin_SCRIPTS = gv-update-userconfig
 pkgdata_DATA = gv_system.ad $(am__append_1)
 appdefaultsdir = $(pkgdatadir)
-appdefaults_DATA = ../GV
+appdefaults_DATA = ../GV.addata
 EXTRA_DIST = ad2c gv_font_res.dat gv_font_res-I18N_mb.dat gv_layout_res.dat gv-i18n.pl gv_misc_res.dat Aaa_bison.yacc \
            gv_current.xbm gv_doc.xbm gv_empty.xbm gv_even.xbm gv_icon.xbm gv_odd.xbm \
            gv_selected.xbm gv_unmark.xbm $(srcdir)/nls/* \
@@ -607,7 +607,7 @@
 
 
 # Clean files
-CLEANFILES = ../GV \
+CLEANFILES = ../GV.addata \
              GV.ad \
              gv_system.ad \
              gv_user.ad \
@@ -625,10 +625,10 @@
 # Compilation flags
 AM_CPPFLAGS = -DNON_BLOCKING_IO -DGV_CODE \
 	-DGV_LIBDIR=\"$(pkgdatadir)\" -I$(top_srcdir)/lib \
-	-I$(top_builddir)/lib -g $(X_CFLAGS) $(am__append_4)
+	-I$(top_builddir)/lib -g $(DEPS_CFLAGS) $(X_CFLAGS) $(am__append_4)
 AM_CFLAGS = 
 LDADD = ../lib/libgnu.a
-gv_LDFLAGS = @X_LIBS@
+gv_LDFLAGS = $(DEPS_LIBS) $(X_LIBS)
 gv_SOURCES = Aaa.c Aaa_bison.c Aaa_bison.h Aaa_lex.c Button.c Button.h \
 	ButtonP.h Clip.c Clip.h ClipP.h FileSel.c FileSel.h FileSelP.h \
 	Frame.c Frame.h FrameP.h Ghostview.c Ghostview.h GhostviewP.h \
@@ -1093,9 +1093,9 @@
 
 # Additional rules for generating styles
 
-../GV : GV.ad
-	@echo "creating GV"
-	sed -e 's/^[^!]/!&/' GV.ad > ../GV
+../GV.addata : GV.ad
+	@echo "creating GV.addata"
+	sed -e 's/^[^!]/!&/' GV.ad > ../GV.addata
 
 GV.ad : gv_system.ad
 	@echo "creating GV.ad"
diff -Nurd gv-3.7.4.orig/src/doc_misc.c gv-3.7.4/src/doc_misc.c
--- gv-3.7.4.orig/src/doc_misc.c	2012-04-01 10:43:24.000000000 -0400
+++ gv-3.7.4/src/doc_misc.c	2025-08-10 17:40:32.000000000 -0400
@@ -84,7 +84,9 @@
          ret = d->structured = 1;
          if (d->numpages == 1) d->labels_useful=1;
          else for (i = 1; i < d->numpages; i++)
-            if (strcmp(d->pages[i-1].label,d->pages[i].label)) { d->labels_useful = 1; break; }
+	    if (d->pages[i-1].label && d->pages[i].label) {
+               if (strcmp(d->pages[i-1].label,d->pages[i].label)) { d->labels_useful = 1; break; }
+	    }
       }
    }
    *docP = d;
diff -Nurd gv-3.7.4.orig/src/misc.c gv-3.7.4/src/misc.c
--- gv-3.7.4.orig/src/misc.c	2012-04-01 10:43:24.000000000 -0400
+++ gv-3.7.4/src/misc.c	2025-08-10 17:40:32.000000000 -0400
@@ -995,8 +995,11 @@
 
         INFMESSAGE(toc available)
 	if (doc->labels_useful) {
-	    for (i = 0; i < doc->numpages; i++) 
-		maxlen = max(maxlen, (int)strlen(doc->pages[i].label));
+	    for (i = 0; i < doc->numpages; i++)
+	       if (doc->pages[i].label)
+      	          maxlen = max(maxlen, (int)strlen(doc->pages[i].label));
+	       else
+	          maxlen = max(maxlen, log10((double) doc->numpages) + 2);
 	} else {
 	    double x;
 	    x = doc->numpages;
@@ -1014,7 +1017,10 @@
 		} else {
 		    j = i;
 		}
-		sprintf(tocp, "%*s\n", maxlen, doc->pages[j].label);
+		if (doc->pages[j].label)
+		  sprintf(tocp, "%*s\n", maxlen, doc->pages[j].label);
+		else
+		  sprintf(tocp, "?%*d\n", maxlen-1, i+1);
 	    } else {
 		sprintf(tocp, "%*d\n", maxlen, i+1);
 	    }
diff -Nurd gv-3.7.4.orig/src/zoom.c gv-3.7.4/src/zoom.c
--- gv-3.7.4.orig/src/zoom.c	2012-03-29 12:03:50.000000000 -0400
+++ gv-3.7.4/src/zoom.c	2025-08-10 17:40:42.000000000 -0400
@@ -104,7 +104,7 @@
 
     BEGINMESSAGE(zoom_createZoom)
 
-    if (!(gv_psfile != NULL || (gv_gs_arguments && *gv_gs_arguments))) {
+    if (!gv_psfile) {
        INFMESSAGE(no file) ENDMESSAGE(zoom_createZoom)
        return;
     }
